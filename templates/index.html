{% extends 'layout.html' %}

{% block title %}Dự đoán giá xe ô tô cũ tại Hà Nội{% endblock %}

{% block content %}
    <section class="hero">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h1 class="hero-title">Dự đoán giá xe ô tô cũ</h1>
                    <p class="hero-subtitle">Sử dụng trí tuệ nhân tạo để xác định giá trị thực của chiếc xe bạn quan tâm</p>
                    <div class="hero-buttons">
                        <a href="#predict-form" class="btn btn-primary btn-lg">
                            <i class="fas fa-calculator me-2"></i>Dự đoán ngay
                        </a>
                        <a href="/visualization" class="btn btn-outline-light btn-lg ms-2">
                            <i class="fas fa-chart-line me-2"></i>Phân tích thị trường
                        </a>
                    </div>
                </div>
                <div class="col-lg-6 d-none d-lg-block">
                </div>
            </div>
        </div>
    </section>

    <section class="features">
        <div class="row text-center">
            <div class="col-md-4 mb-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <h3>KNN Regression</h3>
                    <p>Sử dụng mô hình KNN đã được chứng minh tốt nhất qua phân tích toàn diện ~13,500 xe .</p>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-chart-pie"></i>
                    </div>
                    <h3>Trực quan hóa</h3>
                    <p>Hiểu rõ thị trường ô tô qua các biểu đồ phân tích xu hướng giá và các yếu tố ảnh hưởng.</p>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-tags"></i>
                    </div>
                    <h3>Phân loại phân khúc</h3>
                    <p>Mô hình RandomForest giúp phân loại xe vào 4 phân khúc giá với độ chính xác cao nhất, phù hợp với dữ liệu phức tạp và nhiều đặc trưng.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="predict-form" class="prediction-form">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="card form-card">
                    <div class="card-header">
                        <h2 class="card-title text-center">Nhập thông tin xe</h2>
                        <p class="text-center text-light">Cung cấp thông tin chi tiết về chiếc xe để nhận được dự đoán giá chính xác nhất</p>
                    </div>
                    <div class="card-body">
                        <form action="/predict" method="post">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="brand" class="form-label">
                                            <i class="fas fa-trademark me-2"></i>Thương hiệu
                                        </label>
                                        <select class="form-select" id="brand" name="brand" required>
                                            <option value="" selected disabled>Chọn thương hiệu</option>
                                            {% for brand in brands %}
                                            <option value="{{ brand }}">{{ brand }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="year" class="form-label">
                                            <i class="fas fa-calendar-alt me-2"></i>Năm sản xuất
                                        </label>
                                        <select class="form-select" id="year" name="year" required>
                                            <option value="" selected disabled>Chọn năm sản xuất</option>
                                            {% for year in range(current_year, 1990, -1) %}
                                            <option value="{{ year }}">{{ year }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="body_type" class="form-label">
                                            <i class="fas fa-car me-2"></i>Kiểu dáng
                                        </label>
                                        <select class="form-select" id="body_type" name="body_type" required>
                                            <option value="" selected disabled>Chọn kiểu dáng</option>
                                            {% for body_type in body_types %}
                                            <option value="{{ body_type }}">{{ body_type }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="engine_capacity" class="form-label">
                                            <i class="fas fa-tachometer-alt me-2"></i>Dung tích động cơ (lít)
                                        </label>
                                        <input type="number" class="form-control" id="engine_capacity" name="engine_capacity" 
                                               step="0.1" min="0.5" max="8.0" placeholder="Ví dụ: 2.0" required>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="fuel_type" class="form-label">
                                            <i class="fas fa-gas-pump me-2"></i>Loại nhiên liệu
                                        </label>
                                        <select class="form-select" id="fuel_type" name="fuel_type" required>
                                            <option value="" selected disabled>Chọn loại nhiên liệu</option>
                                            {% for fuel_type in fuel_types %}
                                            <option value="{{ fuel_type }}">{{ fuel_type }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="origin" class="form-label">
                                            <i class="fas fa-globe me-2"></i>Xuất xứ
                                        </label>
                                        <select class="form-select" id="origin" name="origin" required>
                                            <option value="" selected disabled>Chọn xuất xứ</option>
                                            <option value="Nhập khẩu">Nhập khẩu</option>
                                            <option value="Trong nước">Trong nước</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="mileage_km" class="form-label">
                                            <i class="fas fa-road me-2"></i>Số km đã đi
                                        </label>
                                        <select class="form-select" id="mileage_km" name="mileage_km" required>
                                            <option value="" selected disabled>Chọn mức độ sử dụng</option>
                                            <option value="5000">0 - 10,000 km (Xe mới/ít đi)</option>
                                            <option value="30000">10,000 - 50,000 km (Xe sử dụng nhẹ)</option>
                                            <option value="75000">50,000 - 100,000 km (Xe sử dụng trung bình)</option>
                                            <option value="150000">100,000 - 200,000 km (Xe sử dụng nhiều)</option>
                                            <option value="250000">Trên 200,000 km (Xe sử dụng rất nhiều)</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="transmission" class="form-label">
                                            <i class="fas fa-cogs me-2"></i>Hộp số
                                        </label>
                                        <select class="form-select" id="transmission" name="transmission">
                                            <option value="" selected disabled>Chọn loại hộp số</option>
                                            <option value="Số tự động">Số tự động</option>
                                            <option value="Số sàn">Số sàn</option>
                                        </select>
                                        <script>
                                            document.addEventListener('DOMContentLoaded', function() {
                                                document.getElementById('transmission').setAttribute('required', 'required');
                                            });
                                        </script>
                                    </div>
                                </div>
                            
                                <div class="col-12 mt-4 text-center">
                                    <button type="submit" class="btn btn-primary btn-lg px-5 py-3">
                                        <i class="fas fa-calculator me-2"></i>Dự đoán giá
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="how-it-works mt-5 pt-5">
        <h2 class="section-title text-center">Cách thức hoạt động</h2>
        <p class="section-subtitle text-center mb-5">Quy trình dự đoán giá xe từ dữ liệu thực tế</p>
        
        <div class="row timeline">
            <div class="col-lg-3 col-md-6 timeline-step">
                <div class="timeline-content">
                    <div class="timeline-icon">
                        <i class="fas fa-database"></i>
                    </div>
                    <h4>Thu thập dữ liệu</h4>
                    <p>Hệ thống thu thập dữ liệu thị trường thực từ hàng nghìn mẫu xe đã rao bán.</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 timeline-step">
                <div class="timeline-content">
                    <div class="timeline-icon">
                        <i class="fas fa-broom"></i>
                    </div>
                    <h4>Xử lý dữ liệu</h4>
                    <p>Làm sạch và xử lý dữ liệu để loại bỏ các yếu tố nhiễu và biến đổi dữ liệu.</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 timeline-step">
                <div class="timeline-content">
                    <div class="timeline-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h4>Huấn luyện mô hình</h4>
                    <p>Sử dụng các thuật toán Machine Learning để phân tích mẫu và dự đoán xu hướng giá.</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 timeline-step">
                <div class="timeline-content">
                    <div class="timeline-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h4>Kết quả chính xác</h4>
                    <p>Cung cấp kết quả dự đoán với độ tin cậy cao dựa trên thông tin xe bạn cung cấp.</p>
                </div>
            </div>
        </div>
    </section>
{% endblock %}
